import { Callout, Steps } from 'nextra/components'
import { IFrame } from 'components/iframe'

# Contributing Guidelines

<Callout>
  Make sure you have have finished [joining the team](/getting-started/join) and [setting up the
  project](/getting-started/setup#project-setup).
</Callout>

This article shows the steps on how to contribute to the project. It is recommended to read the [project structure](/getting-started/setup#project-structure) first.

## Pre-requisites

This section is a reminder on how to commit, about the dos and don'ts, and other important notes.

### How to commit better

The following video explains how to commit with better messages. It is recommended to watch the video before proceeding.

<IFrame src="https://www.youtube.com/embed/Hlp-9cdImSM?start=45" />

### Dos and Don'ts

1. **Always** include backlog item code at the start.
   **But**, for **commit messages**, you don't need to include the code if:

- you're working in a subtask branch or
- you just refactored/cleaned some code.

2. For branches, try to limit up to 3 words as much as possible. Spaces are replaced with hyphen. Example:

```md
ALT-6-add-item
```

3. For commits, type the changes you've made in **detail** as much as possible. Example:

```md
Example: ALT-10 Added a prototype for table data
```

4. If you have installed a new npm package, always inform the team and include it in the commit as well as in the PR description. Example:

```md
## What did you do?

- Added `Alert` shadcn component
- Added `nextjs-toploader` package
```

It is everyone's responsibility to run `npm install` in their local repository.

5. When switching branches, always `npx prisma generate` to generate the schema. This is to avoid errors when running the app.

## Pull Request (PR)

<Steps>
### Go to the repository

### Find your branch and click "Compare & pull request"

### Enter title and description

The title must be in this format: `ALT-# Given task title`

```md
ALT-2 Create a new page for the dashboard
```

Use the following template for the description:

```md {1} copy
# [ALT-#](link) insert title here

## What type of PR is this? (select all that apply)

- [x] üì¶ Feature
- üêõ Bug Fix
- üë®‚Äçüíª Code Refactor
- [x] üóíÔ∏è Documentation update

## Description

< enter the task description >

## What did you do?

(for example...)

- Learned how to use NextAuth
- Added the tech stack and the packages that will be used
- Updated `README.md`

## What to watch out for? (optional)

- Possible conflict between db schema of Draft 3 and NextAuth (for Google OAuth)
```

### Add reviewers

Add the TL and the team members who are familiar with the task.

### Click "Create pull request"

### Wait for approval

Let the reviewers review your code. If there are changes to be made, make the changes and commit again. If there are no changes to be made, the reviewers will approve the PR.

### Merge the PR

After the PR is approved, merge the PR. If there are conflicts, resolve the conflicts. If there are no conflicts, merge the PR.

### Pull from development

After the PR is merged, pull from development to get the latest changes.

### Delete the branch

After pulling from development, delete the branch. This is to avoid confusion when creating a new branch.

### Done!

</Steps>
### Important note

If you're done with the branch, let's say last commit na or tapos ka na and ready na for PR (Pull request), **always** `git pull origin development` before PR.

**How?**
(Assuming na hindi nyo pa ginagalaw code after ng last commit)

- For VS Code users, open your terminal (Ctrl+\`) and type `git pull origin development`
- For Github Desktop users, open command prompt (sa repo folder) and type `git pull origin development`

**Why?**
We want to pull the changes from everyone before pushing our code to the remote repository. Doing so will ensure that our local copy is in sync with new changes made by the team in the remote repository. If there are conflicts when pulling, we can resolve conflicts. **Developers MUST TEST** if everything is working by checking the web app (kung may nasira ba) or the code (kung may na overwrite/nawala).

## Trunk Based Development

<Steps>
**How do I start working on a user story/task/subtask?**

### Notify the team.

Use #general or in Messenger gc if you're going to work on a task.
Change the state in JIRA to `In Progress`.

### Create a new branch from development.

_(For VS Code)_

1. Make sure you're on the `development` branch by checking lower-left of status bar.
2. Go to Source Control (`Ctrl+Shift+G then G`)
3. Open actions menu (the 3 dots) then Branch > Create Branch...
4. Enter the code and title with spaces as hyphen (e.g `ALT-68-Sidebar-menu`).
5. Click "Publish Branch."
   _(For Github Desktop)_
6. Make sure you're on the `development` branch by checking "Current branch."
7. Go to Branch > New Branch or `Ctrl+Shift+N`
8. Enter the code and title with spaces as hyphen (e.g `ALT-68-Sidebar-menu`).
9. Select `development` branch then click "Create branch."
10. Click "Publish branch."

### Code üßë‚Äçüíª

### Commit and push.

1. Stage your files.

- For VSCode, press `+`
- For Github Desktop, open cmd, do `git status`, then `git add <file path>`

2. Run `npx lint-staged` to format code.
3. Commit (apply coding standard) then Push/Sync.

**Now that I am done with the task, what do I do now?**

### Pull from development.

### Pull Request (PR)

1. Go to https://github.com/erik-lance/TitafindsXG5/pulls
2. Click "New pull request."
3. Click `base: main` then select `development` branch.
4. Click `compare: main` then select the branch to PR (e.g `compare: ALT-68-Sidebar-menu`).
5. Click "Create pull request".
6. For the title, edit the code like `ALT 68 sidebar menu` to `ALT-68 sidebar menu`.
7. For the description, follow this example https://github.com/erik-lance/TitafindsXG5/pull/9
8. For the reviewers, add @pseudo1337 and @Quality Assurance.
9. Click "Create pull request".

### Notify the team for Code Review.

Note: If the branch is a user story, change the state to `Ready for QA` in JIRA.
@Quality Assurance **must** test the feature on the web app and try breaking the system.
@Developer can review the code (new changes, mistakes, etc.)

**The team has finished reviewing and all is working. What's next?**

### Merge and then delete the branch. Simply click the buttons.

Note: If the branch is a user story, change the state to `Ready for Review` in JIRA.

### Update and clean your local repo.

Switch to `development` branch then click the üîÑÔ∏è button; either VS Code (lower-left) or Github Desktop.
Since the deletion of the branch only happens in remote/cloud, we need to clean our local repo:

1. Open command prompt in our repo folder (or use terminal in VS Code)
2. Type `git fetch -p`.
3. Type `npm run clean-local`.

### Take a quick break. Don't forget to rest!

</Steps>
```
